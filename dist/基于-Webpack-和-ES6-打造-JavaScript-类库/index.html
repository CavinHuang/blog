<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta name=baidu-site-verification content=rqskM4bdtP><meta name=viewport content="device-width, initial-scale=1, maximum-scale=1,user-scalable=no"><title>基于 Webpack 和 ES6 打造 JavaScript 类库-CavinHuang-不懂写故事的猫-http://blog.zukmb.cn</title><meta name=keywords content=前端学习,php学习,个人博客,HTML,CSS,JS><meta name=description content=cavinHuang个人博客，这里记录学习和生活的点滴！><meta name=google-site-verification content=zOYxWUgmeogC0qY76WLP0eWl8r9E8jk_qU927Ij7tbs><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a4c3745fa28006f"></script><link rel=stylesheet href=/css/yoyo.css><link rel=icon href=/img/favicon.png><link rel=stylesheet href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><script src=//cdn.bootcss.com/jquery/3.2.1/jquery.min.js></script><script src=//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdn.bootcss.com/velocity/1.5.0/velocity.min.js></script></head><body></body></html><div class=app><div class=left-container><canvas id=cas></canvas><div class="left-layout-container pc"><div class=user-info><a href="/"><img src="https://avatars1.githubusercontent.com/u/24950299?s=460&amp;v=4"></a><div class=login-name>CavinHuang</div><div class=slog>来不及总结自己,愿天大地大,我独一无二!</div></div><ul class=other-site><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/github.png></li><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/weibo.png></li></ul><ul class=left-menu><li><a href=/archives>文章</a></li><li><a href=/categories>分类</a></li><li><a href=/tags>标签</a></li><li><a href=/about>关于</a></li></ul><div class=qq-group><span>读万卷书</span><span>行万里路</span></div><div class=copyright>@ 2017 - 2017 CavinHuang</div></div></div><div class="blog-container main-container" id=content-outer><div class=blog-list-container id=content-inner><article class=article-container id=post><div class=article-header><h1 class=article-title>基于 Webpack 和 ES6 打造 JavaScript 类库</h1><div class=article-subtitle><div class="publish-time fl">发布时间:<span>2017/11/21 21:9:58</span></div><div class=categories>分类:<a href="/categories/前端开发/"><span>前端开发</span></a></div></div></div><div class=article-content><h2 id=首先，我们说的-“类库”-是指什么><a href=#首先，我们说的-“类库”-是指什么 class=headerlink title="首先，我们说的 “类库” 是指什么"></a>首先，我们说的 “类库” 是指什么</h2><blockquote><p>在 JavaScript 语境中，我对类库的定义是 “提供了特定功能的一段代段”。一个类库只做一件事，并且把这件事做好。在理想情况下，它不依赖其它类库或框架。jQuery 就是一个很好的例子。React 或者 Vue.js 也可以认为是一个类库。<br><a id=more></a></p></blockquote><p>一个类库应该：</p><p>可以在浏览器环境下使用。也就是说，可以通过 script 标签来引入这个类库。<br>可以通过 npm 来安装。<br>兼容 ES6(ES2015) 的模块系统、CommonJS 和 AMD 模块规范。<br>用什么来开发这个类库并不重要，重要的是我们最终产出的文件。它只要满足上述要求就行。尽管如此，我还是比较喜欢用原生 JavaScript 写成的类库，因为这样更方便其它人贡献代码。</p><h2 id=目录结构><a href=#目录结构 class=headerlink title=目录结构></a>目录结构</h2><p>我一般选择如下的目录结构：</p><figure class="highlight sh"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div></pre></td><td class=code><pre><div class=line>+-- lib</div><div class=line>|   +-- library.js</div><div class=line>|   +-- library.min.js</div><div class=line>+-- src</div><div class=line>|   +-- index.js</div><div class=line>+-- <span class=built_in>test</span></div><div class=line>+-- lib</div><div class=line>|   +-- library.js</div><div class=line>|   +-- library.min.js</div><div class=line>+-- src</div><div class=line>|   +-- index.js</div><div class=line>+-- <span class=built_in>test</span></div></pre></td></tr></table></figure><p>其中 src 目录用于存放源码文件，而 lib 目录用于存放最终编译的结果。这意味着类库的入口文件应该放在 lib 目录下，而不是 src 目录下。</p><p>起步动作</p><p>我确实很喜欢最新的 ES6 规范。但坏消息是它身上绑了一堆的附加工序。也许将来某一天我们可以摆脱转译过程，所写即所得；但现在还不行。通常我们需要用到 Babel 来完成转译这件事。Babel 可以把我们的 ES6 文件转换为 ES5 格式，但它并不打算处理打包事宜。或者换句话说，如果我们有以下文件：</p><figure class="highlight sh"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div></pre></td><td class=code><pre><div class=line>+-- lib</div><div class=line>+-- src</div><div class=line>    +-- index.js (es6)</div><div class=line>    +-- helpers.js (es6)</div></pre></td></tr></table></figure><p>然后我们用上 Babel，那我们将会得到：</p><figure class="highlight sh"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div></pre></td><td class=code><pre><div class=line>+-- lib</div><div class=line>|   +-- index.js (es5)</div><div class=line>|   +-- helpers.js (es5)</div><div class=line>+-- src</div><div class=line>    +-- index.js (es6)</div><div class=line>    +-- helpers.js (es6)</div></pre></td></tr></table></figure><p>或者再换句话说，Babel 并不解析代码中的 import 或 require 指令。因此，我们需要一个打包工具，而你应该已经猜到了，我的选择正是 webpack。最终我想达到的效果是这样的：</p><figure class="highlight sh"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div></pre></td><td class=code><pre><div class=line>+-- lib</div><div class=line>|   +-- library.js (es5)</div><div class=line>|   +-- library.min.js (es5)</div><div class=line>+-- src</div><div class=line>    +-- index.js (es6)</div><div class=line>    +-- helpers.js (es6)</div></pre></td></tr></table></figure><p>npm 命令</p><p>在运行任务方面，npm 提供了一套不错的机制——scripts（脚本）。我们至少需要注册以下三个脚本：</p><figure class=highlight><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div></pre></td><td class=code><pre><div class=line>"scripts": &#123;</div><div class=line>  "build": "...",</div><div class=line>  "dev": "...",</div><div class=line>  "test": "..."</div><div class=line>&#125;</div></pre></td></tr></table></figure><p>npm run build – 这个脚本用来生成这个类库的最终压缩版文件。<br>npm run dev – 跟 build 类似，但它并不压缩代码；此外还需要启动一个监视进程。<br>npm run test – 用来运行测试。<br>构建开发版本</p><p>npm run dev 需要调用 webpack 并生成 lib/library.js 文件。我们从 webpack 的配置文件开始着手：</p><p>JavaScript<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div><div class=line>37</div></pre></td><td class=code><pre><div class=line><span class=comment>// webpack.config.js</span></div><div class=line><span class=keyword>var</span> webpack = <span class=built_in>require</span>(<span class=string>'webpack'</span>);</div><div class=line><span class=keyword>var</span> path = <span class=built_in>require</span>(<span class=string>'path'</span>);</div><div class=line><span class=keyword>var</span> libraryName = <span class=string>'library'</span>;</div><div class=line><span class=keyword>var</span> outputFile = libraryName + <span class=string>'.js'</span>;</div><div class=line></div><div class=line><span class=keyword>var</span> config = &#123;</div><div class=line>  entry: __dirname + <span class=string>'/src/index.js'</span>,</div><div class=line>  devtool: <span class=string>'source-map'</span>,</div><div class=line>  output: &#123;</div><div class=line>    path: __dirname + <span class=string>'/lib'</span>,</div><div class=line>    filename: outputFile,</div><div class=line>    library: libraryName,</div><div class=line>    libraryTarget: <span class=string>'umd'</span>,</div><div class=line>    umdNamedDefine: <span class=literal>true</span></div><div class=line>  &#125;,</div><div class=line>  <span class=built_in>module</span>: &#123;</div><div class=line>    loaders: [</div><div class=line>      &#123;</div><div class=line>        test: <span class=regexp>/(\.jsx|\.js)$/</span>,</div><div class=line>        loader: <span class=string>'babel'</span>,</div><div class=line>        exclude: <span class=regexp>/(node_modules|bower_components)/</span></div><div class=line>      &#125;,</div><div class=line>      &#123;</div><div class=line>        test: <span class=regexp>/(\.jsx|\.js)$/</span>,</div><div class=line>        loader: <span class=string>"eslint-loader"</span>,</div><div class=line>        exclude: <span class=regexp>/node_modules/</span></div><div class=line>      &#125;</div><div class=line>    ]</div><div class=line>  &#125;,</div><div class=line>  resolve: &#123;</div><div class=line>    root: path.resolve(<span class=string>'./src'</span>),</div><div class=line>    extensions: [<span class=string>''</span>, <span class=string>'.js'</span>]</div><div class=line>  &#125;</div><div class=line>&#125;;</div><div class=line></div><div class=line><span class=built_in>module</span>.exports = config;</div></pre></td></tr></table></figure></p><p>即使你还没有使用 webpack 的经验，你或许也可以看明白这个配置文件做了些什么。我们定义了这个编译过程的输入（entry）和输出（output）。那个 module 属性指定了每个文件在处理过程中将被哪些模块处理。在我们的这个例子中，需要用到 Babel 和 ESLint，其中 ESLint 用来校验代码的语法和正确性。</p><p>这里有一个坑，花了我不少的时间。这个坑是关于 library、libraryTarget 和 umdNamedDefine 属性的。最开始我没有把它们写到配置中，结果编译结果就成了下面这个样子：</p><p>JavaScript<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div></pre></td><td class=code><pre><div class=line>(<span class=function><span class=keyword>function</span>(<span class=params>modules</span>) </span>&#123;</div><div class=line>  <span class=keyword>var</span> installedModules = &#123;&#125;;</div><div class=line></div><div class=line>  <span class=function><span class=keyword>function</span> <span class=title>__webpack_require__</span>(<span class=params>moduleId</span>) </span>&#123;</div><div class=line>    <span class=keyword>if</span>(installedModules[moduleId]) <span class=keyword>return</span> installedModules[moduleId].exports;</div><div class=line></div><div class=line>    <span class=keyword>var</span> <span class=built_in>module</span> = installedModules[moduleId] = &#123;</div><div class=line>      exports: &#123;&#125;,</div><div class=line>      id: moduleId,</div><div class=line>      loaded: <span class=literal>false</span></div><div class=line>    &#125;;</div><div class=line>    modules[moduleId].call(<span class=built_in>module</span>.exports, <span class=built_in>module</span>, <span class=built_in>module</span>.exports, __webpack_require__);</div><div class=line>    <span class=built_in>module</span>.loaded = <span class=literal>true</span>;</div><div class=line>    <span class=keyword>return</span> <span class=built_in>module</span>.exports;</div><div class=line>  &#125;</div><div class=line></div><div class=line>  __webpack_require__.m = modules;</div><div class=line>  __webpack_require__.c = installedModules;</div><div class=line>  __webpack_require__.p = <span class=string>""</span>;</div><div class=line></div><div class=line>  <span class=keyword>return</span> __webpack_require__(<span class=number>0</span>);</div><div class=line>&#125;)([</div><div class=line>  <span class=function><span class=keyword>function</span>(<span class=params>module, exports</span>) </span>&#123;</div><div class=line>    <span class=comment>// ... my code here</span></div><div class=line>  &#125;</div><div class=line>]);</div></pre></td></tr></table></figure></p><p>经过 webpack 编译之后的文件差不多都是这个样子。它采用的方式跟 Browserify 很类似。编译结果是一个自调用的函数，它会接收应用程序中所用到的所有模块。每个模块都被存放到到 modules 数组中。上面这段代码只包含了一个模块，而 <strong>webpack_require</strong>(0) 实际上相当于运行 src/index.js 文件中的代码。</p><p>光是得到这样一个打包文件，并没有满足我们在文章开头所提到的所有需求，因为我们还没有导出任何东西。这个文件的运行结果在网页中必定会被丢弃。不过，如果我们加上 library、libraryTarget 和umdNamedDefine，就可以让 webpack 在文件顶部注入一小段非常漂亮的代码片断：</p><p>JavaScript<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div></pre></td><td class=code><pre><div class=line>(<span class=function><span class=keyword>function</span> <span class=title>webpackUniversalModuleDefinition</span>(<span class=params>root, factory</span>) </span>&#123;</div><div class=line>  <span class=keyword>if</span>(<span class=keyword>typeof</span> exports === <span class=string>'object'</span> &amp;&amp; <span class=keyword>typeof</span> <span class=built_in>module</span> === <span class=string>'object'</span>)</div><div class=line>    <span class=built_in>module</span>.exports = factory();</div><div class=line>  <span class=keyword>else</span> <span class=keyword>if</span>(<span class=keyword>typeof</span> define === <span class=string>'function'</span> &amp;&amp; define.amd)</div><div class=line>    define(<span class=string>"library"</span>, [], factory);</div><div class=line>  <span class=keyword>else</span> <span class=keyword>if</span>(<span class=keyword>typeof</span> exports === <span class=string>'object'</span>)</div><div class=line>    exports[<span class=string>"library"</span>] = factory();</div><div class=line>  <span class=keyword>else</span></div><div class=line>    root[<span class=string>"library"</span>] = factory();</div><div class=line>&#125;)(<span class=keyword>this</span>, <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</div><div class=line><span class=keyword>return</span> (<span class=function><span class=keyword>function</span>(<span class=params>modules</span>) </span>&#123;</div><div class=line> ...</div><div class=line> ...</div></pre></td></tr></table></figure></p><p>把 libraryTarget 设定为 umd 表示采用 通用模块定义 来生成最终结果。而且这段代码确实可以识别不同的运行环境，并为我们的类库提供一个妥当的初始化机制。</p><p>构建生产环境所需的版本</p><p>对 webpack 来说，开发阶段与生产阶段之间唯一的区别在于压缩。运行 npm run build 应该生成一个压缩版——library.min.js。webpack 有一个不错的内置插件可以做到这一点：</p><p>JavaScript<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div></pre></td><td class=code><pre><div class=line><span class=comment>// webpack.config.js</span></div><div class=line>...</div><div class=line><span class=keyword>var</span> UglifyJsPlugin = webpack.optimize.UglifyJsPlugin;</div><div class=line><span class=keyword>var</span> env = process.env.WEBPACK_ENV;</div><div class=line></div><div class=line><span class=keyword>var</span> libraryName = <span class=string>'library'</span>;</div><div class=line><span class=keyword>var</span> plugins = [], outputFile;</div><div class=line></div><div class=line><span class=keyword>if</span> (env === <span class=string>'build'</span>) &#123;</div><div class=line>  plugins.push(<span class=keyword>new</span> UglifyJsPlugin(&#123; <span class=attr>minimize</span>: <span class=literal>true</span> &#125;));</div><div class=line>  outputFile = libraryName + <span class=string>'.min.js'</span>;</div><div class=line>&#125; <span class=keyword>else</span> &#123;</div><div class=line>  outputFile = libraryName + <span class=string>'.js'</span>;</div><div class=line>&#125;</div><div class=line></div><div class=line><span class=keyword>var</span> config = &#123;</div><div class=line>  entry: __dirname + <span class=string>'/src/index.js'</span>,</div><div class=line>  devtool: <span class=string>'source-map'</span>,</div><div class=line>  output: &#123; ... &#125;,</div><div class=line>  <span class=built_in>module</span>: &#123; ... &#125;,</div><div class=line>  resolve: &#123; ... &#125;,</div><div class=line>  plugins: plugins</div><div class=line>&#125;;</div><div class=line></div><div class=line><span class=built_in>module</span>.exports = config;</div></pre></td></tr></table></figure></p><p>只要我们把 UglifyJsPlugin 加入到 plugins 数组中，它就可以完成这个任务。此外，还一些事情有待明确。我们还需要某种条件判断逻辑，来告诉 webpack 需要生成哪一种类型（“开发阶段” 还是 “生产阶段”）的打包文件。一个常见的做法是定义一个环境变量，并将它通过命令行传进去。比如这样：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div></pre></td><td class=code><pre><div class=line></div><div class=line><span class=comment>// package.json</span></div><div class=line><span class=string>"scripts"</span>: &#123;</div><div class=line>  <span class=string>"build"</span>: <span class=string>"WEBPACK_ENV=build webpack"</span>,</div><div class=line>  <span class=string>"dev"</span>: <span class=string>"WEBPACK_ENV=dev webpack --progress --colors --watch"</span></div><div class=line>&#125;</div></pre></td></tr></table></figure><p>（请留意 –watch 选项。它会让 webpack 监视文件变化并持续运行构建任务。）</p><p>测试</p><p>我通常采用 Mocha 和 Chai 来运行测试——测试环节是这篇起步教程特有的内容。这里同样存在一个棘手的问题，就是如何让 Mocha 正确识别用 ES6 写的测试文件。不过谢天谢地，Babel 再次解决了这个问题。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div></pre></td><td class=code><pre><div class=line></div><div class=line><span class=comment>// package.json</span></div><div class=line><span class=string>"scripts"</span>: &#123;</div><div class=line>  ...</div><div class=line>  <span class=string>"test"</span>: <span class=string>"mocha --compilers js:babel-core/register --colors -w ./test/*.spec.js"</span></div><div class=line>&#125;</div></pre></td></tr></table></figure><p>这里最关键的部分在于 –compilers 这个选项。它允许我们在运行测试文件之前预先处理这个文件。</p><p>其它配置文件</p><p>在最新的 6.x 版本中，Babel 发生了一些重大的变化。现在，在指定哪些代码转换器将被启用时，我们需要面对一种叫作 presets 的东西。最简单配置的方法就是写一个 .babelrc 文件：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div></pre></td><td class=code><pre><div class=line></div><div class=line><span class=comment>// .babelrc &#123;</span></div><div class=line>  <span class=string>"presets"</span>: [<span class=string>"es2015"</span>],</div><div class=line>  <span class=string>"plugins"</span>: [<span class=string>"babel-plugin-add-module-exports"</span>]</div><div class=line>&#125;</div></pre></td></tr></table></figure><p>ESLint 也需要一个类似的配置文件，叫作 .eslintrc：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div></pre></td><td class=code><pre><div class=line><span class=comment>// .eslintrc &#123;</span></div><div class=line>  <span class=string>"ecmaFeatures"</span>: &#123;</div><div class=line>    <span class=string>"globalReturn"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"jsx"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"modules"</span>: <span class=literal>true</span></div><div class=line>  &#125;,</div><div class=line>  <span class=string>"env"</span>: &#123;</div><div class=line>    <span class=string>"browser"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"es6"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"node"</span>: <span class=literal>true</span></div><div class=line>  &#125;,</div><div class=line>  <span class=string>"globals"</span>: &#123;</div><div class=line>    <span class=string>"document"</span>: <span class=literal>false</span>,</div><div class=line>    <span class=string>"escape"</span>: <span class=literal>false</span>,</div><div class=line>    <span class=string>"navigator"</span>: <span class=literal>false</span>,</div><div class=line>    <span class=string>"unescape"</span>: <span class=literal>false</span>,</div><div class=line>    <span class=string>"window"</span>: <span class=literal>false</span>,</div><div class=line>    <span class=string>"describe"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"before"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"it"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"expect"</span>: <span class=literal>true</span>,</div><div class=line>    <span class=string>"sinon"</span>: <span class=literal>true</span></div><div class=line>  &#125;,</div><div class=line>  <span class=string>"parser"</span>: <span class=string>"babel-eslint"</span>,</div><div class=line>  <span class=string>"plugins"</span>: [],</div><div class=line>  <span class=string>"rules"</span>: &#123;</div><div class=line>    <span class=comment>// ... lots of lots of rules here</span></div><div class=line>  &#125;</div><div class=line>&#125;</div></pre></td></tr></table></figure><p>相关资料</p><p>用到的项目如下：</p><p>webpack<br>Babel<br>ESLint<br>Mocha, Chai<br>UMD<br>具体依赖如下：</p><figure class="highlight 1c"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div></pre></td><td class=code><pre><div class=line><span class=comment>// package.json</span></div><div class=line><span class=string>"devDependencies"</span>: &#123;</div><div class=line>  <span class=string>"babel"</span>: <span class=string>"6.3.13"</span>,</div><div class=line>  <span class=string>"babel-core"</span>: <span class=string>"6.1.18"</span>,</div><div class=line>  <span class=string>"babel-eslint"</span>: <span class=string>"4.1.3"</span>,</div><div class=line>  <span class=string>"babel-loader"</span>: <span class=string>"6.1.0"</span>,</div><div class=line>  <span class=string>"babel-plugin-add-module-exports"</span>: <span class=string>"0.1.2"</span>,</div><div class=line>  <span class=string>"babel-preset-es2015"</span>: <span class=string>"6.3.13"</span>,</div><div class=line>  <span class=string>"chai"</span>: <span class=string>"3.4.1"</span>,</div><div class=line>  <span class=string>"eslint"</span>: <span class=string>"1.7.2"</span>,</div><div class=line>  <span class=string>"eslint-loader"</span>: <span class=string>"1.1.0"</span>,</div><div class=line>  <span class=string>"mocha"</span>: <span class=string>"2.3.4"</span>,</div><div class=line>  <span class=string>"webpack"</span>: <span class=string>"1.12.9"</span></div><div class=line>&#125;</div><div class=line><span class=comment>// package.json</span></div><div class=line><span class=string>"devDependencies"</span>: &#123;</div><div class=line>  <span class=string>"babel"</span>: <span class=string>"6.3.13"</span>,</div><div class=line>  <span class=string>"babel-core"</span>: <span class=string>"6.1.18"</span>,</div><div class=line>  <span class=string>"babel-eslint"</span>: <span class=string>"4.1.3"</span>,</div><div class=line>  <span class=string>"babel-loader"</span>: <span class=string>"6.1.0"</span>,</div><div class=line>  <span class=string>"babel-plugin-add-module-exports"</span>: <span class=string>"0.1.2"</span>,</div><div class=line>  <span class=string>"babel-preset-es2015"</span>: <span class=string>"6.3.13"</span>,</div><div class=line>  <span class=string>"chai"</span>: <span class=string>"3.4.1"</span>,</div><div class=line>  <span class=string>"eslint"</span>: <span class=string>"1.7.2"</span>,</div><div class=line>  <span class=string>"eslint-loader"</span>: <span class=string>"1.1.0"</span>,</div><div class=line>  <span class=string>"mocha"</span>: <span class=string>"2.3.4"</span>,</div><div class=line>  <span class=string>"webpack"</span>: <span class=string>"1.12.9"</span></div><div class=line>&#125;</div></pre></td></tr></table></figure></div><div id=side-right-bar><div class=close-right-bar></div><div class=sidebar-toc><div class=sidebar-toc__title>目录</div><div class=sidebar-toc__progress><span class=progress-notice>你已经阅读了</span><span class=progress-num>0</span><span class=progress-percentage>%</span><div class=sidebar-toc__progress-bar></div></div><div class=sidebar-toc__content><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#首先，我们说的-“类库”-是指什么><span class=toc-number>1.</span> <span class=toc-text>首先，我们说的 “类库” 是指什么</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#目录结构><span class=toc-number>2.</span> <span class=toc-text>目录结构</span></a></li></ol></div></div></div><div class=right-btn id=right-btn><span>目录</span></div><div class=article-bottom><div class="addthis_inline_share_toolbox fr"></div></div><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta>文章作者:</span><span class=post-copyright-info><a href=mailto:undefined>CavinHuang</a></span></div><div class=post-copyright__type><span class=post-copyright-meta>文章链接:</span><span class=post-copyright-info><a href="http://blog.zukmb.cn基于-Webpack-和-ES6-打造-JavaScript-类库/">http://blog.zukmb.cn基于-Webpack-和-ES6-打造-JavaScript-类库/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta>版权声明:</span><span class=post-copyright-info>转载请注明来自<a href=http://blog.zukmb.cn target=_blank style="font-size: 18px;">CavinHuangのBlog</a>！</span></div></div><div class=article-pagenate><div class="article-prev fl"><span>←</span><a href="/Request-——-让-Node-js-http请求变得超简单/">Request —— 让 Node.js http请求变得超简单</a></div><div class="article-next fr"><a href="/Linux的cron和crontab/">Linux的cron和crontab</a><span>→</span></div></div></article></div><footer class=footer><div id=toTop style="display: none;">Back to Top</div></footer></div></div><canvas class=fireworks></canvas><script src=/js/velocity.ui.min.js></script><script src=/js/yoyo.js></script><script src=/js/scroll.js></script><script src=/js/particle.js></script><script src=/js/anime.min.js></script><script src=/js/fireworks.js></script>