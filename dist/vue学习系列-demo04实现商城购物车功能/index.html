<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta name=baidu-site-verification content=rqskM4bdtP><meta name=viewport content="device-width, initial-scale=1, maximum-scale=1,user-scalable=no"><title>vue学习系列-demo04实现商城购物车功能-CavinHuang-不懂写故事的猫-http://blog.zukmb.cn</title><meta name=keywords content=前端学习,php学习,个人博客,HTML,CSS,JS><meta name=description content=cavinHuang个人博客，这里记录学习和生活的点滴！><meta name=google-site-verification content=zOYxWUgmeogC0qY76WLP0eWl8r9E8jk_qU927Ij7tbs><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a4c3745fa28006f"></script><link rel=stylesheet href=/css/yoyo.css><link rel=icon href=/img/favicon.png><link rel=stylesheet href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><script src=//cdn.bootcss.com/jquery/3.2.1/jquery.min.js></script><script src=//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdn.bootcss.com/velocity/1.5.0/velocity.min.js></script></head><body></body></html><div class=app><div class=left-container><canvas id=cas></canvas><div class="left-layout-container pc"><div class=user-info><a href="/"><img src="https://avatars1.githubusercontent.com/u/24950299?s=460&amp;v=4"></a><div class=login-name>CavinHuang</div><div class=slog>来不及总结自己,愿天大地大,我独一无二!</div></div><ul class=other-site><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/github.png></li><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/weibo.png></li></ul><ul class=left-menu><li><a href=/archives>文章</a></li><li><a href=/categories>分类</a></li><li><a href=/tags>标签</a></li><li><a href=/about>关于</a></li></ul><div class=qq-group><span>读万卷书</span><span>行万里路</span></div><div class=copyright>@ 2017 - 2017 CavinHuang</div></div></div><div class="blog-container main-container" id=content-outer><div class=blog-list-container id=content-inner><article class=article-container id=post><div class=article-header><h1 class=article-title>vue学习系列-demo04实现商城购物车功能</h1><div class=article-subtitle><div class="publish-time fl">发布时间:<span>2017/5/3 21:22:49</span></div><div class=categories>分类:</div></div></div><div class=article-content><p>首先，先上最终的效果图<br><img src="http://img.blog.csdn.net/20170503210148155?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQwOTg0OA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述><br><a id=more></a></p><hr><p>效果并不是很好看，但是这不是重点。<br>首先，我们先看下布局，<br><figure class="highlight html"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div><div class=line>37</div><div class=line>38</div><div class=line>39</div><div class=line>40</div><div class=line>41</div><div class=line>42</div><div class=line>43</div><div class=line>44</div><div class=line>45</div><div class=line>46</div><div class=line>47</div><div class=line>48</div></pre></td><td class=code><pre><div class=line><span class=tag>&lt;<span class=name>template</span>&gt;</span></div><div class=line>	<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"shopcar"</span> <span class=attr>id</span>=<span class=string>"demo04"</span>&gt;</span></div><div class=line>		<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"header-title"</span>&gt;</span></div><div class=line>			<span class=tag>&lt;<span class=name>h3</span>&gt;</span>购物车<span class=tag>&lt;/<span class=name>h3</span>&gt;</span></div><div class=line>		<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>		<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-list"</span>&gt;</span></div><div class=line>			<span class=tag>&lt;<span class=name>ul</span>&gt;</span></div><div class=line>				<span class=tag>&lt;<span class=name>li</span> <span class=attr>class</span>=<span class=string>"car-item"</span> <span class=attr>v-for</span>=<span class=string>"(item,index) in good_list"</span>&gt;</span></div><div class=line>					<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"input-block"</span>&gt;</span></div><div class=line>						<span class=tag>&lt;<span class=name>label</span> <span class=attr>class</span>=<span class=string>"input-label"</span> <span class=attr>:class</span>=<span class=string>"&#123;active: item.is_selected&#125;"</span> <span class=attr>:for</span>=<span class=string>"'car-checkbox-'+index"</span> @<span class=attr>click</span>=<span class=string>"select_one(index)"</span>&gt;</span><span class=tag>&lt;/<span class=name>label</span>&gt;</span></div><div class=line>					<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>					<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-item-content"</span>&gt;</span></div><div class=line>						<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-img"</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>img</span> <span class=attr>:src</span>=<span class=string>"item.img"</span> /&gt;</span></div><div class=line>						<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>						<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-cont"</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>h3</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class=tag>&lt;/<span class=name>h3</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"cat-desc"</span>&gt;</span></div><div class=line>								<span class=tag>&lt;<span class=name>span</span> <span class=attr>v-for</span>=<span class=string>"spec in item.spec_item"</span>&gt;</span>&#123;&#123;spec&#125;&#125;<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>							<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>						<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>						<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"num"</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>span</span> @<span class=attr>click</span>=<span class=string>"reduce(index)"</span>&gt;</span>-<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>span</span>&gt;</span>&#123;&#123;item.num&#125;&#125;<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>span</span> @<span class=attr>click</span>=<span class=string>"add(index)"</span>&gt;</span>+<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>						<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>						<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-price"</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>span</span> <span class=attr>class</span>=<span class=string>"car-price"</span>&gt;</span>￥&#123;&#123;item.price&#125;&#125;<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>							<span class=tag>&lt;<span class=name>span</span> <span class=attr>class</span>=<span class=string>"car-num"</span>&gt;</span>X&#123;&#123;item.num&#125;&#125;<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>						<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>					<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>				<span class=tag>&lt;/<span class=name>li</span>&gt;</span></div><div class=line>			<span class=tag>&lt;/<span class=name>ul</span>&gt;</span></div><div class=line>		<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>		<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"car-footer"</span>&gt;</span></div><div class=line>			<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"foot-car"</span>&gt;</span></div><div class=line>				<span class=tag>&lt;<span class=name>label</span> <span class=attr>for</span>=<span class=string>"foot-check"</span> <span class=attr>class</span>=<span class=string>"input-label"</span> <span class=attr>:class</span>=<span class=string>"&#123;active: selected_all&#125;"</span> @<span class=attr>click</span>=<span class=string>"slect_all"</span>&gt;</span><span class=tag>&lt;/<span class=name>label</span>&gt;</span></div><div class=line>			<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>			<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"total-cont"</span>&gt;</span></div><div class=line>				<span class=tag>&lt;<span class=name>span</span>&gt;</span>总价：&#123;&#123;totalPrice&#125;&#125;<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>				<span class=tag>&lt;<span class=name>span</span>&gt;</span>共&#123;&#123;totalNum&#125;&#125;件<span class=tag>&lt;/<span class=name>span</span>&gt;</span></div><div class=line>			<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>			<span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"btn-box"</span>&gt;</span></div><div class=line>				<span class=tag>&lt;<span class=name>button</span>&gt;</span>立即下单<span class=tag>&lt;/<span class=name>button</span>&gt;</span></div><div class=line>			<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>		<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line>	<span class=tag>&lt;/<span class=name>div</span>&gt;</span></div><div class=line><span class=tag>&lt;/<span class=name>template</span>&gt;</span></div></pre></td></tr></table></figure></p><p>非常常见的布局，微商城购物车随处可见，先说明下，在这里，实现选中的功能并不是用传统的label+checkbox实现，而是一个单独的label，目的是为了简化dom结构，在传统的jq项目或者zepto项目中，一般会会这样写，主要是为了方便操作demo，但是vue项目完全不用考虑dom的操作，怎么方便怎么来就ok。</p><p>在加些简单的样式，<br><figure class="highlight stylus"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div><div class=line>37</div><div class=line>38</div><div class=line>39</div><div class=line>40</div><div class=line>41</div><div class=line>42</div><div class=line>43</div><div class=line>44</div><div class=line>45</div><div class=line>46</div><div class=line>47</div><div class=line>48</div><div class=line>49</div><div class=line>50</div><div class=line>51</div><div class=line>52</div><div class=line>53</div><div class=line>54</div><div class=line>55</div><div class=line>56</div><div class=line>57</div><div class=line>58</div><div class=line>59</div><div class=line>60</div><div class=line>61</div><div class=line>62</div><div class=line>63</div><div class=line>64</div><div class=line>65</div><div class=line>66</div><div class=line>67</div><div class=line>68</div><div class=line>69</div><div class=line>70</div><div class=line>71</div><div class=line>72</div><div class=line>73</div><div class=line>74</div><div class=line>75</div><div class=line>76</div><div class=line>77</div><div class=line>78</div><div class=line>79</div><div class=line>80</div><div class=line>81</div><div class=line>82</div><div class=line>83</div><div class=line>84</div><div class=line>85</div><div class=line>86</div><div class=line>87</div><div class=line>88</div><div class=line>89</div><div class=line>90</div><div class=line>91</div><div class=line>92</div><div class=line>93</div><div class=line>94</div><div class=line>95</div><div class=line>96</div><div class=line>97</div><div class=line>98</div><div class=line>99</div><div class=line>100</div><div class=line>101</div><div class=line>102</div><div class=line>103</div><div class=line>104</div><div class=line>105</div><div class=line>106</div><div class=line>107</div><div class=line>108</div><div class=line>109</div><div class=line>110</div><div class=line>111</div><div class=line>112</div><div class=line>113</div><div class=line>114</div><div class=line>115</div><div class=line>116</div><div class=line>117</div><div class=line>118</div><div class=line>119</div><div class=line>120</div><div class=line>121</div><div class=line>122</div><div class=line>123</div><div class=line>124</div></pre></td><td class=code><pre><div class=line>.header-title</div><div class=line>	<span class=attribute>height</span> <span class=number>42px</span></div><div class=line>	<span class=attribute>line-height</span> <span class=number>42px</span></div><div class=line>	<span class=attribute>background</span> <span class=number>#f5f5f5</span></div><div class=line>	<span class=attribute>border-bottom</span> <span class=number>1px</span> solid <span class=number>#ddd</span></div><div class=line><span class=selector-class>.header-title</span> h3</div><div class=line>	<span class=attribute>font-weight</span> normal</div><div class=line>	<span class=attribute>text-align</span> center</div><div class=line>.car-list</div><div class=line>	<span class=attribute>background</span> <span class=number>#f2f2f2</span></div><div class=line>	<span class=attribute>margin-top</span> <span class=number>12px</span></div><div class=line>	<span class=attribute>padding</span> <span class=number>8px</span></div><div class=line>.car-item</div><div class=line>	<span class=attribute>border-bottom</span> <span class=number>1px</span> solid <span class=number>#ddd</span></div><div class=line>	<span class=attribute>position</span> relative</div><div class=line>	<span class=attribute>height</span> <span class=number>76px</span></div><div class=line>	<span class=attribute>overflow</span> hidden</div><div class=line>.car-checkbox</div><div class=line>	<span class=attribute>display</span> none</div><div class=line>.input-block</div><div class=line>	<span class=attribute>width</span> <span class=number>30px</span></div><div class=line>	<span class=attribute>float</span> left</div><div class=line>	<span class=attribute>height</span> <span class=number>55px</span></div><div class=line>	<span class=attribute>line-height</span> <span class=number>55px</span></div><div class=line>.input-label</div><div class=line>	<span class=attribute>cursor</span> pointer  </div><div class=line>	<span class=attribute>position</span> absolute  </div><div class=line>	<span class=attribute>width</span> <span class=number>18px</span>  </div><div class=line>	<span class=attribute>height</span> <span class=number>18px</span>  </div><div class=line>	<span class=attribute>top</span> <span class=number>18px</span>  </div><div class=line>	<span class=attribute>left</span> <span class=number>0</span>  </div><div class=line>	<span class=attribute>background</span> <span class=number>#fff</span>  </div><div class=line>	<span class=attribute>border</span>:<span class=number>2px</span> solid <span class=number>#ccc</span></div><div class=line>	<span class=attribute>border-radius</span> <span class=number>50%</span></div><div class=line><span class=selector-class>.input-label</span>:after</div><div class=line>	<span class=attribute>opacity</span> <span class=number>0</span>  </div><div class=line>	<span class=attribute>content</span> <span class=string>''</span>  </div><div class=line>	<span class=attribute>position</span> absolute  </div><div class=line>	<span class=attribute>width</span> <span class=number>9px</span>  </div><div class=line>	<span class=attribute>height</span> <span class=number>5px</span>  </div><div class=line>	<span class=attribute>background</span> transparent  </div><div class=line>	<span class=attribute>top</span> <span class=number>6px</span>  </div><div class=line>	<span class=attribute>left</span> <span class=number>6px</span>  </div><div class=line>	<span class=attribute>border</span> <span class=number>2px</span> solid <span class=number>#333</span>  </div><div class=line>	<span class=attribute>border-top</span> none  </div><div class=line>	<span class=attribute>border-right</span> none  </div><div class=line>	-webkit-<span class=attribute>transform</span> rotate(-<span class=number>45deg</span>)  </div><div class=line>	-moz-<span class=attribute>transform</span> rotate(-<span class=number>45deg</span>)  </div><div class=line>	-o-<span class=attribute>transform</span> rotate(-<span class=number>45deg</span>)  </div><div class=line>	-ms-<span class=attribute>transform</span> rotate(-<span class=number>45deg</span>)  </div><div class=line>	<span class=attribute>transform</span> rotate(-<span class=number>45deg</span>)  </div><div class=line>.car-img</div><div class=line>	<span class=attribute>width</span> <span class=number>64px</span></div><div class=line>	<span class=attribute>height</span> <span class=number>64px</span></div><div class=line>	<span class=attribute>float</span> left</div><div class=line>	<span class=attribute>overflow</span> hidden</div><div class=line><span class=selector-class>.car-img</span> img</div><div class=line>	<span class=attribute>width</span> <span class=number>100%</span></div><div class=line><span class=selector-class>.input-label</span><span class=selector-class>.active</span></div><div class=line>	<span class=attribute>background</span> <span class=number>#F15A24</span></div><div class=line>.car-cont</div><div class=line>	<span class=attribute>margin-left</span> <span class=number>100px</span></div><div class=line><span class=selector-class>.car-cont</span> h3</div><div class=line>	<span class=attribute>font-weight</span> normal</div><div class=line>	<span class=attribute>line-height</span> <span class=number>24px</span></div><div class=line>	<span class=attribute>font-size</span> <span class=number>14px</span></div><div class=line>.car-price</div><div class=line>	<span class=attribute>position</span> absolute</div><div class=line>	<span class=attribute>right</span> <span class=number>12px</span></div><div class=line>	<span class=attribute>bottom</span> <span class=number>0px</span></div><div class=line>	<span class=attribute>width</span> <span class=number>40px</span></div><div class=line>	<span class=attribute>height</span> <span class=number>40px</span></div><div class=line>	<span class=attribute>text-align</span> right</div><div class=line><span class=selector-class>.car-price</span> span</div><div class=line>	<span class=attribute>display</span> block</div><div class=line>	<span class=attribute>height</span> <span class=number>24px</span></div><div class=line>	<span class=attribute>line-height</span> <span class=number>24px</span></div><div class=line>	<span class=attribute>width</span> <span class=number>100%</span></div><div class=line>.car-footer</div><div class=line>	<span class=attribute>height</span> <span class=number>60px</span></div><div class=line>	<span class=attribute>background</span> <span class=number>#f5f5f5</span></div><div class=line>	<span class=attribute>position</span> fixed</div><div class=line>	<span class=attribute>bottom</span> <span class=number>0</span></div><div class=line>	<span class=attribute>left</span> <span class=number>0</span></div><div class=line>	<span class=attribute>right</span> <span class=number>0</span></div><div class=line>.foot-car</div><div class=line>	<span class=attribute>width</span> <span class=number>42px</span></div><div class=line>	<span class=attribute>height</span> <span class=number>60px</span></div><div class=line>	<span class=attribute>float</span> left</div><div class=line>	<span class=attribute>margin-left</span> <span class=number>12px</span></div><div class=line>	<span class=attribute>position</span> relative</div><div class=line>.total-cont</div><div class=line>	<span class=attribute>height</span> <span class=number>60px</span></div><div class=line>	<span class=attribute>line-height</span> <span class=number>60px</span></div><div class=line>	<span class=attribute>font-size</span> <span class=number>16px</span></div><div class=line>	<span class=attribute>float</span> left</div><div class=line><span class=selector-class>.total-cont</span> span</div><div class=line>	<span class=attribute>display</span> inline-block</div><div class=line>	<span class=attribute>margin-left</span> <span class=number>12px</span></div><div class=line>.btn-box</div><div class=line>	<span class=attribute>float</span> right</div><div class=line>	<span class=attribute>height</span> <span class=number>60px</span></div><div class=line>	<span class=attribute>line-height</span> <span class=number>60px</span></div><div class=line><span class=selector-class>.btn-box</span> button</div><div class=line>	<span class=attribute>height</span> <span class=number>100%</span></div><div class=line>	<span class=attribute>width</span>: <span class=number>100px</span></div><div class=line>	<span class=attribute>border</span> none</div><div class=line>	<span class=attribute>background</span> <span class=number>#F15A24</span></div><div class=line>	<span class=attribute>color</span> <span class=number>#fff</span></div><div class=line>	<span class=attribute>font-size</span> <span class=number>16px</span></div><div class=line>.num</div><div class=line>	<span class=attribute>position</span> absolute</div><div class=line>	<span class=attribute>top</span> <span class=number>28px</span></div><div class=line>	<span class=attribute>right</span> <span class=number>25px</span></div><div class=line>	<span class=attribute>width</span> <span class=number>120px</span></div><div class=line><span class=selector-class>.num</span> span</div><div class=line>	<span class=attribute>display</span> inline-block</div><div class=line>	<span class=attribute>width</span> <span class=number>28px</span></div><div class=line>	<span class=attribute>height</span> <span class=number>28px</span></div><div class=line>	<span class=attribute>float</span> left</div><div class=line>	<span class=attribute>text-align</span> center</div><div class=line>	<span class=attribute>line-height</span> <span class=number>28px</span></div><div class=line>	<span class=attribute>border</span> <span class=number>1px</span> solid <span class=number>#ddd</span></div><div class=line>	<span class=attribute>font-size</span> <span class=number>14px</span></div></pre></td></tr></table></figure></p><p>最近在学习stylus的使用，所以，就当做练习了。<br>接下就是javascript了，<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div><div class=line>37</div><div class=line>38</div><div class=line>39</div><div class=line>40</div><div class=line>41</div><div class=line>42</div><div class=line>43</div><div class=line>44</div><div class=line>45</div><div class=line>46</div><div class=line>47</div><div class=line>48</div><div class=line>49</div><div class=line>50</div><div class=line>51</div><div class=line>52</div><div class=line>53</div><div class=line>54</div><div class=line>55</div><div class=line>56</div><div class=line>57</div><div class=line>58</div><div class=line>59</div><div class=line>60</div><div class=line>61</div><div class=line>62</div><div class=line>63</div><div class=line>64</div><div class=line>65</div><div class=line>66</div><div class=line>67</div><div class=line>68</div><div class=line>69</div><div class=line>70</div><div class=line>71</div><div class=line>72</div><div class=line>73</div><div class=line>74</div><div class=line>75</div><div class=line>76</div><div class=line>77</div><div class=line>78</div><div class=line>79</div><div class=line>80</div><div class=line>81</div><div class=line>82</div><div class=line>83</div><div class=line>84</div><div class=line>85</div><div class=line>86</div><div class=line>87</div><div class=line>88</div><div class=line>89</div><div class=line>90</div><div class=line>91</div><div class=line>92</div><div class=line>93</div><div class=line>94</div><div class=line>95</div><div class=line>96</div><div class=line>97</div><div class=line>98</div><div class=line>99</div><div class=line>100</div><div class=line>101</div><div class=line>102</div><div class=line>103</div><div class=line>104</div><div class=line>105</div><div class=line>106</div><div class=line>107</div><div class=line>108</div><div class=line>109</div><div class=line>110</div><div class=line>111</div><div class=line>112</div></pre></td><td class=code><pre><div class=line><span class=keyword>export</span> <span class=keyword>default</span> &#123;</div><div class=line>		data () &#123;</div><div class=line>			<span class=keyword>return</span> &#123;</div><div class=line>				good_list: [</div><div class=line>					&#123;</div><div class=line>						title: <span class=string>'Apple iPhone 6s 16GB 玫瑰金色 移动联通电信4G手机'</span>,</div><div class=line>						img: <span class=string>"http://sc.tywebs.cn/public/upload/goods/2017/04-27/a767693b9a84747f25335f0e33d3d380.jpg"</span>,</div><div class=line>						num: <span class=number>2</span>,</div><div class=line>						price: <span class=number>6070.00</span>,</div><div class=line>						spec_item:[</div><div class=line>							<span class=string>'内存:16G'</span>,</div><div class=line>							<span class=string>'网络:4G'</span>,</div><div class=line>							<span class=string>'颜色:玫瑰金'</span></div><div class=line>						],</div><div class=line>						is_selected: <span class=literal>false</span></div><div class=line>					&#125;,&#123;</div><div class=line>						title: <span class=string>'Apple iPhone 6s 32GB 玫瑰金色 移动联通电信4G手机'</span>,</div><div class=line>						img: <span class=string>'http://sc.tywebs.cn/public/upload/goods/2017/04-27/a767693b9a84747f25335f0e33d3d380.jpg'</span>,</div><div class=line>						num: <span class=number>2</span>,</div><div class=line>						price: <span class=number>4570.00</span>,</div><div class=line>						spec_item:[</div><div class=line>							<span class=string>'内存:32G'</span>,</div><div class=line>							<span class=string>'网络:4G'</span>,</div><div class=line>							<span class=string>'颜色:玫瑰金'</span></div><div class=line>						],</div><div class=line>						is_selected: <span class=literal>true</span></div><div class=line>					&#125;,&#123;</div><div class=line>						title: <span class=string>'Apple iPhone 6s 8GB 玫瑰金色 移动联通电信4G手机'</span>,</div><div class=line>						img: <span class=string>'http://sc.tywebs.cn/public/upload/goods/2017/04-27/a767693b9a84747f25335f0e33d3d380.jpg'</span>,</div><div class=line>						num: <span class=number>2</span>,</div><div class=line>						price: <span class=number>4870.00</span>,</div><div class=line>						spec_item:[</div><div class=line>							<span class=string>'内存:8G'</span>,</div><div class=line>							<span class=string>'网络:4G'</span>,</div><div class=line>							<span class=string>'颜色:玫瑰金'</span></div><div class=line>						],</div><div class=line>						is_selected: <span class=literal>false</span></div><div class=line>					&#125;,&#123;</div><div class=line>						title: <span class=string>'Apple iPhone 6s 128GB 玫瑰金色 移动联通电信4G手机'</span>,</div><div class=line>						img: <span class=string>'http://sc.tywebs.cn/public/upload/goods/2017/04-27/a767693b9a84747f25335f0e33d3d380.jpg'</span>,</div><div class=line>						num: <span class=number>2</span>,</div><div class=line>						price: <span class=number>10568.00</span>,</div><div class=line>						spec_item:[</div><div class=line>							<span class=string>'内存:128G'</span>,</div><div class=line>							<span class=string>'网络:4G'</span>,</div><div class=line>							<span class=string>'颜色:玫瑰金'</span></div><div class=line>						],</div><div class=line>						is_selected: <span class=literal>true</span></div><div class=line>					&#125;,</div><div class=line>				],</div><div class=line>				totalPrice: <span class=number>0</span>,</div><div class=line>				totalNum: <span class=number>0</span>,</div><div class=line>				selected_all: <span class=literal>false</span></div><div class=line>			&#125;</div><div class=line>		&#125;,</div><div class=line>		mounted: <span class=function><span class=keyword>function</span> (<span class=params></span>) </span>&#123;</div><div class=line>			<span class=keyword>this</span>.getTotal();</div><div class=line>		&#125;,</div><div class=line>		watch: &#123;</div><div class=line>			<span class=string>'good_list'</span>: &#123;</div><div class=line>				handler: <span class=function><span class=keyword>function</span> (<span class=params>val, oldVal</span>) </span>&#123;</div><div class=line>					<span class=comment>// console.log(val)</span></div><div class=line>					<span class=keyword>return</span> val;</div><div class=line>				&#125;,</div><div class=line>				deep: <span class=literal>true</span></div><div class=line>			&#125;</div><div class=line>		&#125;,</div><div class=line>		methods: &#123;</div><div class=line>			getTotal () &#123;</div><div class=line>				<span class=keyword>this</span>.totalPrice = <span class=number>0</span></div><div class=line>				<span class=keyword>this</span>.totalNum = <span class=number>0</span></div><div class=line>				<span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; <span class=keyword>this</span>.good_list.length; i++) &#123;</div><div class=line>					<span class=keyword>var</span> _d = <span class=keyword>this</span>.good_list[i]</div><div class=line>					<span class=keyword>if</span>(_d.is_selected)&#123;</div><div class=line>						<span class=keyword>this</span>.totalPrice += _d[<span class=string>'price'</span>] * _d[<span class=string>'num'</span>]</div><div class=line>						<span class=keyword>this</span>.totalNum +=_d[<span class=string>'num'</span>]</div><div class=line>					&#125;</div><div class=line>				&#125;</div><div class=line>			&#125;,</div><div class=line>			select_one (index) &#123;</div><div class=line>				<span class=keyword>if</span>(<span class=keyword>this</span>.good_list[index].is_selected == <span class=literal>true</span>)&#123;</div><div class=line>					<span class=keyword>this</span>.good_list[index].is_selected = <span class=literal>false</span></div><div class=line>				&#125;<span class=keyword>else</span>&#123;</div><div class=line>					<span class=keyword>this</span>.good_list[index].is_selected = <span class=literal>true</span></div><div class=line>				&#125;</div><div class=line>				<span class=keyword>this</span>.getTotal()</div><div class=line>			&#125;,</div><div class=line>			slect_all () &#123;</div><div class=line>				<span class=keyword>if</span>(<span class=keyword>this</span>.selected_all)&#123;</div><div class=line>					<span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; <span class=keyword>this</span>.good_list.length; i++) &#123;</div><div class=line>						<span class=keyword>this</span>.good_list[i].is_selected = <span class=literal>false</span>;</div><div class=line>					&#125;</div><div class=line>					<span class=keyword>this</span>.selected_all = <span class=literal>false</span>						</div><div class=line>				&#125;<span class=keyword>else</span>&#123;</div><div class=line>					<span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; <span class=keyword>this</span>.good_list.length; i++) &#123;</div><div class=line>						<span class=keyword>this</span>.good_list[i].is_selected = <span class=literal>true</span>;</div><div class=line>					&#125;</div><div class=line>					<span class=keyword>this</span>.selected_all = <span class=literal>true</span>						</div><div class=line>				&#125;</div><div class=line>				<span class=keyword>this</span>.getTotal()</div><div class=line>			&#125;,</div><div class=line>			reduce (index) &#123;</div><div class=line>				<span class=keyword>if</span>(<span class=keyword>this</span>.good_list[index].num &lt;= <span class=number>1</span>) <span class=keyword>return</span>;</div><div class=line>				<span class=keyword>this</span>.good_list[index].num --</div><div class=line>				<span class=keyword>this</span>.getTotal()</div><div class=line>			&#125;,</div><div class=line>			add (index) &#123;</div><div class=line>				<span class=keyword>this</span>.good_list[index].num ++</div><div class=line>				<span class=keyword>this</span>.getTotal()</div><div class=line>			&#125;</div><div class=line>		&#125;</div><div class=line>	&#125;</div></pre></td></tr></table></figure></p><p>这里用mock数据来代替后台请求数据的动作，为了方便测试，逻辑比较简单，首先getTotal这个方法用来计算选中的item的数量以及总价，select_one用来处理单个选中的逻辑，slect_all 用来处理全部选中以及全部取消选中的操作，reduce用来处理处理减操作，顾名思义add用来处理加的操作。当然在真实的开发中，还会有校验库存的动作，每次加减都要校验库存。数据处理也会更复杂，但是闻琴弦而知雅意，器原理都是相通的。</p><p>github地址<a href=https://github.com/CavinHuang/vue-study/tree/master/coffee/src/pages/demo04 target=_blank rel=external>传送门</a></p></div><div id=side-right-bar><div class=close-right-bar></div><div class=sidebar-toc><div class=sidebar-toc__title>目录</div><div class=sidebar-toc__progress><span class=progress-notice>你已经阅读了</span><span class=progress-num>0</span><span class=progress-percentage>%</span><div class=sidebar-toc__progress-bar></div></div><div class=sidebar-toc__content></div></div></div><div class=right-btn id=right-btn><span>目录</span></div><div class=article-bottom><div class="addthis_inline_share_toolbox fr"></div></div><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta>文章作者:</span><span class=post-copyright-info><a href=mailto:undefined>CavinHuang</a></span></div><div class=post-copyright__type><span class=post-copyright-meta>文章链接:</span><span class=post-copyright-info><a href="http://blog.zukmb.cnvue学习系列-demo04实现商城购物车功能/">http://blog.zukmb.cnvue学习系列-demo04实现商城购物车功能/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta>版权声明:</span><span class=post-copyright-info>转载请注明来自<a href=http://blog.zukmb.cn target=_blank style="font-size: 18px;">CavinHuangのBlog</a>！</span></div></div><div class=article-pagenate><div class="article-prev fl"><span>←</span><a href="/webpack-study-log/">webpack-study-log webpack学习笔记【持续更行...】</a></div><div class="article-next fr"><a href="/vue-js学习系列-条形图小demo/">vue-js学习系列-条形图小demo</a><span>→</span></div></div></article></div><footer class=footer><div id=toTop style="display: none;">Back to Top</div></footer></div></div><canvas class=fireworks></canvas><script src=/js/velocity.ui.min.js></script><script src=/js/yoyo.js></script><script src=/js/scroll.js></script><script src=/js/particle.js></script><script src=/js/anime.min.js></script><script src=/js/fireworks.js></script>