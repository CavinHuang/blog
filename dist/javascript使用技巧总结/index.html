<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta name=baidu-site-verification content=rqskM4bdtP><meta name=viewport content="device-width, initial-scale=1, maximum-scale=1,user-scalable=no"><title>javascript使用技巧总结-CavinHuang-不懂写故事的猫-http://blog.zukmb.cn</title><meta name=keywords content=前端学习,php学习,个人博客,HTML,CSS,JS><meta name=description content=cavinHuang个人博客，这里记录学习和生活的点滴！><meta name=google-site-verification content=zOYxWUgmeogC0qY76WLP0eWl8r9E8jk_qU927Ij7tbs><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a4c3745fa28006f"></script><link rel=stylesheet href=/css/yoyo.css><link rel=icon href=/img/favicon.png><link rel=stylesheet href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><script src=//cdn.bootcss.com/jquery/3.2.1/jquery.min.js></script><script src=//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdn.bootcss.com/velocity/1.5.0/velocity.min.js></script></head><body></body></html><div class=app><div class=left-container><canvas id=cas></canvas><div class="left-layout-container pc"><div class=user-info><a href="/"><img src="https://avatars1.githubusercontent.com/u/24950299?s=460&amp;v=4"></a><div class=login-name>CavinHuang</div><div class=slog>来不及总结自己,愿天大地大,我独一无二!</div></div><ul class=other-site><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/github.png></li><li><img src=http://www.17sucai.com/preview/177065/2017-09-28/Mon9/static/img/weibo.png></li></ul><ul class=left-menu><li><a href=/archives>文章</a></li><li><a href=/categories>分类</a></li><li><a href=/tags>标签</a></li><li><a href=/about>关于</a></li></ul><div class=qq-group><span>读万卷书</span><span>行万里路</span></div><div class=copyright>@ 2017 - 2017 CavinHuang</div></div></div><div class="blog-container main-container" id=content-outer><div class=blog-list-container id=content-inner><article class=article-container id=post><div class=article-header><h1 class=article-title>javascript使用技巧总结</h1><div class=article-subtitle><div class="publish-time fl">发布时间:<span>2017/2/6 21:14:26</span></div><div class=categories>分类:</div></div></div><div class=article-content><blockquote><p>JavaScript技巧，偶尔更新。</p></blockquote><h3 id=计算数组的极值><a href=#计算数组的极值 class=headerlink title=计算数组的极值></a>计算数组的极值</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>smallest</span>(<span class=params>array</span>)</span>&#123;                         </div><div class=line>  <span class=keyword>return</span> <span class=built_in>Math</span>.min.apply(<span class=built_in>Math</span>, array);             </div><div class=line>&#125;                                                 </div><div class=line><span class=function><span class=keyword>function</span> <span class=title>largest</span>(<span class=params>array</span>)</span>&#123;                          </div><div class=line>  <span class=keyword>return</span> <span class=built_in>Math</span>.max.apply(<span class=built_in>Math</span>, array);             </div><div class=line>&#125;  </div><div class=line>smallest([<span class=number>0</span>, <span class=number>1</span>, <span class=number>2.2</span>, <span class=number>3.3</span>]); <span class=comment>// 0</span></div><div class=line>largest([<span class=number>0</span>, <span class=number>1</span>, <span class=number>2.2</span>, <span class=number>3.3</span>]); <span class=comment>// 3.3</span></div></pre></td></tr></table></figure><a id=more></a><h3 id=迭代arguments><a href=#迭代arguments class=headerlink title=迭代arguments></a>迭代arguments</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>useCall</span>(<span class=params></span>) </span>&#123;</div><div class=line>    [].forEach.call(<span class=built_in>arguments</span>, <span class=function><span class=keyword>function</span>(<span class=params>val, key</span>) </span>&#123;</div><div class=line>        <span class=built_in>console</span>.log(key, val)</div><div class=line>    &#125;);</div><div class=line>&#125;</div><div class=line></div><div class=line>useCall(<span class=string>'Bob Dylan'</span>, <span class=string>'Bob Marley'</span>, <span class=string>'Steve Vai'</span>);</div><div class=line></div><div class=line><span class=comment>//0 "Bob Dylan"</span></div><div class=line><span class=comment>//1 "Bob Marley"</span></div><div class=line><span class=comment>//2 "Steve Vai"</span></div></pre></td></tr></table></figure><h3 id=将arguments转为数组><a href=#将arguments转为数组 class=headerlink title=将arguments转为数组></a>将arguments转为数组</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div><div class=line>37</div><div class=line>38</div><div class=line>39</div><div class=line>40</div><div class=line>41</div><div class=line>42</div><div class=line>43</div><div class=line>44</div><div class=line>45</div><div class=line>46</div><div class=line>47</div><div class=line>48</div><div class=line>49</div><div class=line>50</div><div class=line>51</div><div class=line>52</div><div class=line>53</div><div class=line>54</div><div class=line>55</div><div class=line>56</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>transformToArray</span>(<span class=params>arg</span>)</span>&#123;</div><div class=line>  <span class=keyword>return</span> <span class=built_in>Array</span>.prototype.slice.call(arg);</div><div class=line>&#125;</div><div class=line><span class=built_in>Array</span>.prototype.forEach()第二个参数</div><div class=line>参考：MDN</div><div class=line><span class=keyword>var</span> coder = &#123;</div><div class=line>  name: <span class=string>'Shock'</span>,</div><div class=line>  friends: [<span class=string>'Rocky'</span>, <span class=string>'Bob'</span>],</div><div class=line>  logHiToFriends:<span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>    <span class=string>'use static'</span></div><div class=line>    <span class=keyword>this</span>.friends.forEach(<span class=function><span class=keyword>function</span>(<span class=params>friend</span>)</span>&#123;</div><div class=line>      <span class=built_in>console</span>.log(<span class=keyword>this</span>.name+ <span class=string>' say hi to '</span>+ friend);</div><div class=line>    &#125;,<span class=keyword>this</span>)<span class=comment>//注意这个this，如果不添加这个参数，你可以猜测会发生什么</span></div><div class=line>  &#125;</div><div class=line>&#125;</div><div class=line>使用IIFE解决循环问题</div><div class=line>unexpected:</div><div class=line></div><div class=line><span class=keyword>var</span> funcs = [];</div><div class=line></div><div class=line><span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) &#123;</div><div class=line>    funcs.push(<span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123; <span class=built_in>console</span>.log(i); &#125;);</div><div class=line>&#125;</div><div class=line></div><div class=line>funcs.forEach(<span class=function><span class=keyword>function</span>(<span class=params>func</span>) </span>&#123;</div><div class=line>    func();     <span class=comment>// 输出数值 "10" 十次</span></div><div class=line>&#125;);</div><div class=line>expected:</div><div class=line></div><div class=line><span class=keyword>var</span> funcs = [];</div><div class=line></div><div class=line><span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) &#123;</div><div class=line>    funcs.push((<span class=function><span class=keyword>function</span>(<span class=params>value</span>) </span>&#123;</div><div class=line>        <span class=keyword>return</span> <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</div><div class=line>            <span class=built_in>console</span>.log(value);</div><div class=line>        &#125;</div><div class=line>    &#125;(i)));</div><div class=line>&#125;</div><div class=line></div><div class=line>funcs.forEach(<span class=function><span class=keyword>function</span>(<span class=params>func</span>) </span>&#123;</div><div class=line>    func();     <span class=comment>// 从 0 到 9 依次输出</span></div><div class=line>&#125;);</div><div class=line>使用<span class=keyword>let</span>解决循环问题</div><div class=line>这是<span class=keyword>let</span>独有的特性(参考)</div><div class=line></div><div class=line><span class=keyword>var</span> funcs = [];</div><div class=line></div><div class=line><span class=keyword>for</span> (<span class=keyword>let</span> i = <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) &#123;</div><div class=line>    funcs.push(<span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</div><div class=line>        <span class=built_in>console</span>.log(i);</div><div class=line>    &#125;);</div><div class=line>&#125;</div><div class=line></div><div class=line>funcs.forEach(<span class=function><span class=keyword>function</span>(<span class=params>func</span>) </span>&#123;</div><div class=line>    func();     <span class=comment>// 从 0 到 9 依次输出</span></div><div class=line>&#125;)</div></pre></td></tr></table></figure><h3 id=判断两个小数是否相等><a href=#判断两个小数是否相等 class=headerlink title=判断两个小数是否相等></a>判断两个小数是否相等</h3><p>//因为javascript数字通常被输入为十进制的浮点数，但内部却被表示为二进制，所以计算结果会有偏差：</p><p>0.1 + 0.2 //0.30000000000000004</p><p>0.1 + 1 - 1 //0.10000000000000009</p><p>0.1 + 0.2 === 0.3 //false</p><p>//所以我们不应该直接比较非整数，而是取其上限，把误差计算进去<br>//这样一个上限称为 machine epsilon，双精度的标准epsilon值是2^-53<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div></pre></td><td class=code><pre><div class=line><span class=keyword>const</span> EPSILON = <span class=built_in>Math</span>.pow(<span class=number>2</span>, <span class=number>-53</span>); <span class=comment>//1.1102230246251565e-16</span></div><div class=line></div><div class=line><span class=function><span class=keyword>function</span> <span class=title>epsEqu</span>(<span class=params>x,y</span>) </span>&#123;</div><div class=line>  <span class=keyword>return</span> <span class=built_in>Math</span>.abs(x - y) &lt; EPSILON;</div><div class=line>&#125;</div><div class=line></div><div class=line>epsEqu(<span class=number>0.1</span>+<span class=number>0.2</span>, <span class=number>0.3</span>) <span class=comment>//true</span></div><div class=line><span class=built_in>Math</span>.round函数的坑</div><div class=line><span class=built_in>Math</span>.round(<span class=number>-3.2</span>) <span class=comment>//-3</span></div><div class=line></div><div class=line><span class=built_in>Math</span>.round(<span class=number>-3.5</span>) <span class=comment>//-3(这个就奇怪了)</span></div><div class=line></div><div class=line><span class=built_in>Math</span>.round(<span class=number>-3.8</span>) <span class=comment>//-4</span></div><div class=line></div><div class=line><span class=comment>//其实，Math.round(x)等同于：</span></div><div class=line><span class=built_in>Math</span>.floor(x + <span class=number>0.5</span>)</div><div class=line>巧用||和&amp;&amp;</div><div class=line><span class=keyword>var</span> bar = $ || <span class=number>233</span>;</div><div class=line><span class=comment>//如果$存在，则把$赋值给bar；如果$不存在，则把233赋值给bar</span></div><div class=line></div><div class=line>$ === <span class=literal>undefined</span> &amp;&amp; (<span class=built_in>window</span>.$ =  jQuery);  </div><div class=line><span class=comment>//如果$不存在,则把jQuery赋值给window.$；如果$存在，则不执行后面的表达式</span></div><div class=line>使用<span class=keyword>break</span> + labels退出循环</div><div class=line><span class=function><span class=keyword>function</span> <span class=title>findNumber</span>(<span class=params>arr</span>)</span>&#123;</div><div class=line>  loop:&#123;</div><div class=line>    <span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>0</span>; i &lt; arr.length; i++) &#123;</div><div class=line>      <span class=keyword>if</span>(arr[i]%<span class=number>2</span> == <span class=number>0</span>)&#123;</div><div class=line>        <span class=keyword>break</span> loop;<span class=comment>//表示退出loop区块</span></div><div class=line>      &#125;</div><div class=line>    &#125;</div><div class=line>    <span class=built_in>console</span>.log(arr);<span class=comment>//这句代码是不会执行的，如果上面只是break，for循环之后的代码还是会执行</span></div><div class=line>  &#125;</div><div class=line>&#125;</div><div class=line></div><div class=line>findNumber([<span class=number>1</span>,<span class=number>3</span>,<span class=number>5</span>,<span class=number>6</span>]);</div></pre></td></tr></table></figure></p><h3 id=简单实现合并对象><a href=#简单实现合并对象 class=headerlink title=简单实现合并对象></a>简单实现合并对象</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>merge</span>(<span class=params>root</span>)</span>&#123;</div><div class=line>  <span class=keyword>for</span> (<span class=keyword>var</span> i = <span class=number>1</span>; i &lt; <span class=built_in>arguments</span>.length; i++) &#123;</div><div class=line>    <span class=keyword>for</span> (<span class=keyword>var</span> key <span class=keyword>in</span> <span class=built_in>arguments</span>[i]) &#123;</div><div class=line>      <span class=keyword>if</span> (object.hasOwnProperty(key)) &#123;</div><div class=line>        root[key] = <span class=built_in>arguments</span>[i][key];</div><div class=line>      &#125;</div><div class=line>    &#125;</div><div class=line>  &#125;</div><div class=line>  <span class=keyword>return</span> root;</div><div class=line>&#125;</div><div class=line></div><div class=line><span class=keyword>var</span> merged = merge(</div><div class=line>  &#123;<span class=attr>name</span>:<span class=string>'Shock'</span>&#125;,</div><div class=line>  &#123;<span class=attr>city</span>:<span class=string>'Shenzhen'</span>&#125;</div><div class=line>)<span class=comment>//&#123;name:'Shock',city:'Shenzhen'&#125;</span></div><div class=line>理解map和<span class=built_in>parseInt</span></div><div class=line>[<span class=string>'1'</span>,<span class=string>'2'</span>,<span class=string>'3'</span>].map(<span class=built_in>parseInt</span>);</div><div class=line><span class=comment>//[1, NaN, NaN]</span></div><div class=line></div><div class=line>[<span class=string>'1'</span>,<span class=string>'2'</span>,<span class=string>'3'</span>].map(<span class=function><span class=keyword>function</span>(<span class=params>x</span>)</span>&#123;<span class=keyword>return</span> <span class=built_in>parseInt</span>(x,<span class=number>10</span>)&#125;);</div><div class=line><span class=comment>//[1, 2, 3]</span></div></pre></td></tr></table></figure><h3 id=上传图片预览功能><a href=#上传图片预览功能 class=headerlink title=上传图片预览功能></a>上传图片预览功能</h3><figure class="highlight html"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div></pre></td><td class=code><pre><div class=line><span class=tag>&lt;<span class=name>input</span> <span class=attr>type</span>=<span class=string>"file"</span> <span class=attr>name</span>=<span class=string>"file"</span> <span class=attr>onchange</span>=<span class=string>"showPreview(this)"</span> /&gt;</span></div><div class=line><span class=tag>&lt;<span class=name>img</span> <span class=attr>id</span>=<span class=string>"portrait"</span> <span class=attr>src</span>=<span class=string>""</span> <span class=attr>width</span>=<span class=string>"70"</span> <span class=attr>height</span>=<span class=string>"75"</span>&gt;</span></div></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>showPreview</span>(<span class=params>source</span>) </span>&#123;</div><div class=line>  <span class=keyword>var</span> file = source.files[<span class=number>0</span>];</div><div class=line>  <span class=keyword>if</span>(<span class=built_in>window</span>.FileReader) &#123;</div><div class=line>      <span class=keyword>var</span> fr = <span class=keyword>new</span> FileReader();</div><div class=line>      fr.onloadend = <span class=function><span class=keyword>function</span>(<span class=params>e</span>) </span>&#123;</div><div class=line>        <span class=built_in>document</span>.getElementById(<span class=string>"portrait"</span>).src = e.target.result;</div><div class=line>      &#125;;</div><div class=line>      fr.readAsDataURL(file);</div><div class=line>  &#125;</div><div class=line>&#125;</div></pre></td></tr></table></figure><h3 id=微信内部修改document-title><a href=#微信内部修改document-title class=headerlink title=微信内部修改document.title></a>微信内部修改document.title</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>setTitle</span>(<span class=params>title</span>) </span>&#123;</div><div class=line>  <span class=built_in>document</span>.title = title;</div><div class=line>  <span class=keyword>if</span> (<span class=regexp>/ip(hone|od|ad)/i</span>.test(navigator.userAgent)) &#123;</div><div class=line>    <span class=keyword>var</span> i = <span class=built_in>document</span>.createElement(<span class=string>'iframe'</span>);</div><div class=line>    i.src = <span class=string>'/favicon.ico'</span>;</div><div class=line>    i.style.display = <span class=string>'none'</span>;</div><div class=line>    i.onload = <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</div><div class=line>      setTimeout(<span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>        i.remove();</div><div class=line>      &#125;, <span class=number>9</span>)</div><div class=line>    &#125;</div><div class=line>    <span class=built_in>document</span>.body.appendChild(i);</div><div class=line>  &#125;</div><div class=line>&#125;</div><div class=line></div><div class=line>setTitle(<span class=string>"要修改的标题"</span>);</div></pre></td></tr></table></figure><h3 id=快速克隆一个对象><a href=#快速克隆一个对象 class=headerlink title=快速克隆一个对象></a>快速克隆一个对象</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div></pre></td><td class=code><pre><div class=line><span class=keyword>var</span> Rocker = <span class=function><span class=keyword>function</span>(<span class=params>name, age</span>)</span>&#123;</div><div class=line>  <span class=keyword>this</span>.name = name,</div><div class=line>  <span class=keyword>this</span>.age = age</div><div class=line>&#125;</div><div class=line></div><div class=line><span class=keyword>var</span> shock = <span class=keyword>new</span> Rocker(<span class=string>'Shock'</span>, <span class=number>24</span>);</div><div class=line></div><div class=line>shock.age = <span class=number>99</span>;</div><div class=line></div><div class=line><span class=keyword>var</span> cloneShock = <span class=built_in>Object</span>.create(shock);</div><div class=line></div><div class=line>cloneShock.name <span class=comment>// "Shock"</span></div><div class=line>cloneShock.age <span class=comment>// 99</span></div><div class=line></div><div class=line><span class=comment>//在不支持ES5的浏览器下，实现create方法如下：</span></div><div class=line></div><div class=line><span class=built_in>Object</span>.create = <span class=built_in>Object</span>.create || <span class=function><span class=keyword>function</span>(<span class=params>obj</span>)</span>&#123;</div><div class=line>  <span class=keyword>var</span> F = <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;&#125;;</div><div class=line>  F.prototype = obj;</div><div class=line></div><div class=line>  <span class=keyword>return</span> <span class=keyword>new</span> F();</div><div class=line>&#125;</div></pre></td></tr></table></figure><h3 id=判断一个值是否是对象><a href=#判断一个值是否是对象 class=headerlink title=判断一个值是否是对象></a>判断一个值是否是对象</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>isObject</span>(<span class=params>value</span>)</span>&#123;</div><div class=line>  <span class=keyword>return</span> value === <span class=built_in>Object</span>(value);</div><div class=line>&#125;</div><div class=line></div><div class=line>isObject(&#123;&#125;); <span class=comment>// true</span></div><div class=line>isObject(<span class=number>123</span>);  <span class=comment>// false</span></div></pre></td></tr></table></figure><h3 id=为构造器模拟apply功能><a href=#为构造器模拟apply功能 class=headerlink title=为构造器模拟apply功能></a>为构造器模拟apply功能</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div></pre></td><td class=code><pre><div class=line><span class=keyword>if</span>(!<span class=built_in>Function</span>.prototype.construct)&#123;</div><div class=line>  <span class=built_in>Function</span>.prototype.construct = <span class=function><span class=keyword>function</span>(<span class=params>argArray</span>)</span>&#123;</div><div class=line>    <span class=keyword>if</span>(!<span class=built_in>Array</span>.isArray(argArray))&#123;</div><div class=line>      <span class=keyword>throw</span> <span class=keyword>new</span> <span class=built_in>TypeError</span>(<span class=string>"Arguments must be an array"</span>);</div><div class=line>    &#125;</div><div class=line>    <span class=keyword>var</span> constr = <span class=keyword>this</span>;</div><div class=line>    <span class=keyword>var</span> nullaryFunc = <span class=built_in>Function</span>.prototype.bind.apply(</div><div class=line>      constr,[<span class=literal>null</span>].concat(argArray));</div><div class=line>    <span class=keyword>return</span> <span class=keyword>new</span> nullaryFunc();</div><div class=line>  &#125;</div><div class=line>&#125;</div><div class=line></div><div class=line><span class=comment>//使用:</span></div><div class=line><span class=built_in>Date</span>.construct([<span class=number>2017</span>, <span class=number>02</span>, <span class=number>14</span>]); <span class=comment>//  Tue Mar 14 2017 00:00:00 GMT+0800 (CST)</span></div></pre></td></tr></table></figure><p>数组去重</p><p>我们这里不考虑数组上的一个自带的过滤算法，比如map、filter等方法！数组去重的关键是需要一个中间数组来存数组来帮助实现数组去重！</p><p>方法一：<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div></pre></td><td class=code><pre><div class=line><span class=keyword>var</span> arr = [<span class=number>1</span>,<span class=number>2</span>,<span class=number>3</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>];</div><div class=line><span class=function><span class=keyword>function</span> <span class=title>toHeavy</span>(<span class=params>array</span>)</span>&#123;</div><div class=line>    <span class=comment>//这是一个缓存对象，用来实现过滤到重复的数据</span></div><div class=line>    <span class=keyword>var</span> cache = &#123;&#125;;</div><div class=line>    <span class=comment>//定义一个中间数组，用来实现当容器</span></div><div class=line>    <span class=keyword>var</span> cacheArr = [];</div><div class=line>    <span class=keyword>for</span>(<span class=keyword>var</span> i = <span class=number>0</span>,len = array.length;i&lt;len;i++)&#123;</div><div class=line>        <span class=keyword>if</span>(!cache[array[i]])&#123;</div><div class=line>            cacheArr.push(array[i]);</div><div class=line>            cache[array[i]] = array[i];</div><div class=line>        &#125;;</div><div class=line>    &#125;;</div><div class=line>    <span class=keyword>return</span> cacheArr;</div><div class=line>&#125;;</div><div class=line>arr = toHeavy(arr);<span class=comment>//arr ==  [1,2,3]</span></div></pre></td></tr></table></figure></p><p>方法二：<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div></pre></td><td class=code><pre><div class=line><span class=comment>//其实思想跟第一个差不多</span></div><div class=line>    <span class=keyword>var</span> arr = [<span class=number>1</span>,<span class=number>2</span>,<span class=number>3</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>,<span class=number>1</span>];</div><div class=line>    <span class=function><span class=keyword>function</span> <span class=title>toHeavy</span>(<span class=params>array</span>)</span>&#123;</div><div class=line>        <span class=keyword>var</span> cache = [];</div><div class=line>        <span class=keyword>for</span>(<span class=keyword>var</span> i = <span class=number>0</span>,len = array.length;i&lt;len;i++)&#123;</div><div class=line>            <span class=comment>//用闭包，防止isHeavy向外部暴露，当然如果用es6的话，可以用let对isHeavy进行声明也能达到同样的目的</span></div><div class=line>            <span class=comment>//因为js中没有块级作用域</span></div><div class=line>            (<span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>                <span class=keyword>var</span> isHeavy = <span class=literal>false</span>;</div><div class=line>                <span class=keyword>for</span>(<span class=keyword>var</span> j = <span class=number>0</span>,_len = cache.length;j&lt;_len;j++)&#123;</div><div class=line>                    <span class=keyword>if</span>(cache[j] == array[i])&#123;</div><div class=line>                        isHeavy = <span class=literal>true</span>;</div><div class=line>                        <span class=keyword>break</span>;</div><div class=line>                    &#125;;</div><div class=line>                &#125;;</div><div class=line>                <span class=keyword>if</span>(!isHeavy)&#123;</div><div class=line>                    <span class=comment>//如果不是重复的，那么就执行把当前值推送的cache里面</span></div><div class=line>                    cache.push(array[i]);</div><div class=line>                &#125;;</div><div class=line>            &#125;)();</div><div class=line>        &#125;;</div><div class=line>        <span class=keyword>return</span> cache;</div><div class=line>    &#125;;</div><div class=line></div><div class=line>    arr = toHeavy(arr);</div></pre></td></tr></table></figure></p><p>最后说一句，现实中的数据肯定不会这么简单，可能会是一个稍微复杂的数据，要给这些数组去重你也不要被吓住，其实原理是一样的，只是你被迷惑了而已！</p><p>在一个数组中随机抽取一部分值</p><p>这个算法的关键要使用Math.random，不说了直接上代码:<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div><div class=line>23</div><div class=line>24</div><div class=line>25</div><div class=line>26</div><div class=line>27</div><div class=line>28</div><div class=line>29</div><div class=line>30</div><div class=line>31</div><div class=line>32</div><div class=line>33</div><div class=line>34</div><div class=line>35</div><div class=line>36</div></pre></td><td class=code><pre><div class=line><span class=keyword>var</span> arr = [<span class=string>'小明'</span>,<span class=string>'小红'</span>,<span class=string>'小陈'</span>,<span class=string>'小于'</span>,<span class=string>'小兰'</span>,<span class=string>'小法'</span>,<span class=string>'小p'</span>,<span class=string>'小张'</span>,<span class=string>'小镇'</span>,<span class=string>'小王'</span>,<span class=string>'傻逼'</span>,<span class=string>'怂逼'</span>];</div><div class=line></div><div class=line>   <span class=function><span class=keyword>function</span> <span class=title>getArr</span>(<span class=params>num,array</span>)</span>&#123;</div><div class=line>       <span class=comment>//num表示要去多少个，它不能大于要取的那个数组的最大长度，如果超过了那么就等于它的长度</span></div><div class=line>       <span class=keyword>var</span> aLength = array.length;</div><div class=line>       <span class=keyword>if</span>(num&gt;=aLength)&#123;</div><div class=line>           num = aLength;</div><div class=line>       &#125;;</div><div class=line>       <span class=keyword>var</span> cacheArr = [];</div><div class=line>       <span class=comment>//我们用一个数组保存原来的数组</span></div><div class=line>       <span class=comment>//记住千万能直接赋值，因为数组是一个引用，这样不能保持原来的数组</span></div><div class=line>       <span class=comment>//这里也可以用originArr = array.slice()</span></div><div class=line>       <span class=keyword>var</span> originArr = (<span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>           <span class=keyword>var</span> arr = [];</div><div class=line>           <span class=keyword>for</span>(<span class=keyword>var</span> i = <span class=number>0</span>,len = array.length;i&lt;len;i++)&#123;</div><div class=line>               arr.push(array[i]);</div><div class=line>           &#125;;</div><div class=line>           <span class=keyword>return</span> arr;</div><div class=line>       &#125;)();</div><div class=line>       <span class=keyword>for</span>(<span class=keyword>var</span> i = <span class=number>0</span>;i&lt;num;i++)&#123;</div><div class=line>           <span class=comment>//array.length不能写成上面的aLength，因为aLength是固定的值，而array.length随着array的改变是自动更新的</span></div><div class=line>           <span class=comment>//Math.random() * array.length得到的是一个介于长度和零之间的一个值，包括0但不包含长度值</span></div><div class=line>           <span class=comment>//我们算出的是一个浮点值，所以我们必须把它转化成整数</span></div><div class=line>           <span class=comment>//因为不能超过最大长度值，所以应该向下取整</span></div><div class=line>           <span class=keyword>var</span> _index = <span class=built_in>Math</span>.floor(<span class=built_in>Math</span>.random() * array.length);</div><div class=line>           cacheArr.push(array[_index]);</div><div class=line>           <span class=comment>//记住一定，取出来之后，一定删除原来位置上的数组值</span></div><div class=line>           <span class=comment>//要不然数组更新不了</span></div><div class=line>           array.splice(_index,<span class=number>1</span>);</div><div class=line>       &#125;;</div><div class=line>       <span class=comment>//取回原来的数组</span></div><div class=line>       array = originArr;</div><div class=line>       <span class=built_in>console</span>.log(array);</div><div class=line>       <span class=keyword>return</span> cacheArr;</div><div class=line>   &#125;;</div><div class=line>   <span class=keyword>var</span> brr = getArr(<span class=number>5</span>,arr);</div></pre></td></tr></table></figure></p><p>得到某个区间的字母组成的数组</p><p>这里主要应用两个方法，一个字符串的charCodeAt和String上的一个静态方法fromCharCode。其思想主要是：先得到这个区间开头字母和结束字母的数字表示，然后就可以在这个区间内做一个循环，并且得到这个区间字母的数字表示，最后把数字传唤成字母依次push到数组里面返回。直接上代码：<br><figure class="highlight javascript"><table><tr><td class=gutter><pre><div class=line>1</div><div class=line>2</div><div class=line>3</div><div class=line>4</div><div class=line>5</div><div class=line>6</div><div class=line>7</div><div class=line>8</div><div class=line>9</div><div class=line>10</div><div class=line>11</div><div class=line>12</div><div class=line>13</div><div class=line>14</div><div class=line>15</div><div class=line>16</div><div class=line>17</div><div class=line>18</div><div class=line>19</div><div class=line>20</div><div class=line>21</div><div class=line>22</div></pre></td><td class=code><pre><div class=line><span class=function><span class=keyword>function</span> <span class=title>getArrForAlphabet</span>(<span class=params>startLetter,endLetter</span>)</span>&#123;</div><div class=line>    <span class=comment>//var regExp = /^[a-zA-Z]$/gi;</span></div><div class=line>    <span class=keyword>var</span> regExp = <span class=keyword>new</span> <span class=built_in>RegExp</span>(<span class=string>"^[a-zA-Z]$"</span>);</div><div class=line>    <span class=keyword>if</span>(!regExp.test(startLetter) || !regExp.test(endLetter))&#123;</div><div class=line>        <span class=comment>//console.log(regExp.test(startLetter));</span></div><div class=line>        <span class=comment>//console.log(regExp.test(endLetter));</span></div><div class=line>        <span class=built_in>console</span>.log(<span class=string>'请传入字母！'</span>);</div><div class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</div><div class=line>    &#125;;</div><div class=line>    <span class=comment>//i是得到开始字母的数字表示，j得到结束字母的数字表示</span></div><div class=line>    <span class=keyword>var</span> i = startLetter.charCodeAt(<span class=number>0</span>),j = endLetter.charCodeAt(<span class=number>0</span>);</div><div class=line>    <span class=comment>//定义一个数组用于取出将来的字母</span></div><div class=line>    <span class=keyword>var</span> arr = [];</div><div class=line>    <span class=comment>//这里取&lt;=符号是因为要取出结束的字母</span></div><div class=line>    <span class=keyword>for</span>(;i&lt;=j;i++)&#123;</div><div class=line>        <span class=comment>//fromCharCode是String上的一个静态方法，用于将一个数字转换成对应的字母</span></div><div class=line>        <span class=keyword>var</span> letter = <span class=built_in>String</span>.fromCharCode(i);</div><div class=line>        arr.push(letter);</div><div class=line>    &#125;;</div><div class=line>    <span class=comment>//记得最后返回arr</span></div><div class=line>    <span class=keyword>return</span> arr;</div><div class=line>&#125;;</div></pre></td></tr></table></figure></p></div><div id=side-right-bar><div class=close-right-bar></div><div class=sidebar-toc><div class=sidebar-toc__title>目录</div><div class=sidebar-toc__progress><span class=progress-notice>你已经阅读了</span><span class=progress-num>0</span><span class=progress-percentage>%</span><div class=sidebar-toc__progress-bar></div></div><div class=sidebar-toc__content><ol class=toc><li class="toc-item toc-level-3"><a class=toc-link href=#计算数组的极值><span class=toc-number>1.</span> <span class=toc-text>计算数组的极值</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#迭代arguments><span class=toc-number>2.</span> <span class=toc-text>迭代arguments</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#将arguments转为数组><span class=toc-number>3.</span> <span class=toc-text>将arguments转为数组</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#判断两个小数是否相等><span class=toc-number>4.</span> <span class=toc-text>判断两个小数是否相等</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#简单实现合并对象><span class=toc-number>5.</span> <span class=toc-text>简单实现合并对象</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#上传图片预览功能><span class=toc-number>6.</span> <span class=toc-text>上传图片预览功能</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#微信内部修改document-title><span class=toc-number>7.</span> <span class=toc-text>微信内部修改document.title</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#快速克隆一个对象><span class=toc-number>8.</span> <span class=toc-text>快速克隆一个对象</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#判断一个值是否是对象><span class=toc-number>9.</span> <span class=toc-text>判断一个值是否是对象</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#为构造器模拟apply功能><span class=toc-number>10.</span> <span class=toc-text>为构造器模拟apply功能</span></a></li></ol></div></div></div><div class=right-btn id=right-btn><span>目录</span></div><div class=article-bottom><div class="addthis_inline_share_toolbox fr"></div></div><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta>文章作者:</span><span class=post-copyright-info><a href=mailto:undefined>CavinHuang</a></span></div><div class=post-copyright__type><span class=post-copyright-meta>文章链接:</span><span class=post-copyright-info><a href="http://blog.zukmb.cnjavascript使用技巧总结/">http://blog.zukmb.cnjavascript使用技巧总结/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta>版权声明:</span><span class=post-copyright-info>转载请注明来自<a href=http://blog.zukmb.cn target=_blank style="font-size: 18px;">CavinHuangのBlog</a>！</span></div></div><div class=article-pagenate><div class="article-prev fl"><span>←</span><a href="/感谢有你/">感谢有你</a></div><div class="article-next fr"><a href="/初学javascript中Array的各种方法/">初学javascript中Array的各种方法</a><span>→</span></div></div></article></div><footer class=footer><div id=toTop style="display: none;">Back to Top</div></footer></div></div><canvas class=fireworks></canvas><script src=/js/velocity.ui.min.js></script><script src=/js/yoyo.js></script><script src=/js/scroll.js></script><script src=/js/particle.js></script><script src=/js/anime.min.js></script><script src=/js/fireworks.js></script>